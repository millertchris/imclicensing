(function ($) {

    /**
     * initializeBlock
     *
     * Adds custom JavaScript to the block HTML.
     *
     * @date    15/4/19
     * @since   1.0.0
     *
     * @param   object $block The block jQuery element.
     * @param   object attributes The block attributes (only available when editing).
     * @return  void
     */

    var initializeBlock = function ($block) {
        
        console.log('testimonials js loaded');

        var slider = $block.find('.testimonial.slider .items');
        // var sliderInit = $block.find('.testimonial.slider .items.slick-initialized');
        // if (sliderInit.length > 0) {
        //     for (var i = 0; i < sliderInit.length; i++) {
        //         console.log(`unslick: ${i}`);
        //         $(sliderInit[i]).slick('unslick');
        //     }
        // }
        if (slider.length > 0) {
            for (var i = 0; i < slider.length; i++) {
                if(slider.hasClass('slick-initialized')) {
                    $(slider[i]).slick('unslick');
                    console.log(`unslick: ${i}`);
                } 
                    // Init first slider
                    $(slider[i]).slick();
                    console.log(`slick: ${i}`);
                
            }
        }

    }

    
    // var initializeBlock = function( $block ) {
    //     $block.find('img').doSomething();
    // }

    // // Initialize each block on page load (front end).
    // $(document).ready(function(){
    //     $('.testimonial').each(function(){
    //         initializeBlock( $(this) );
    //     });
    // }); 

    // Initialize dynamic block preview (editor).
    if (window.acf) {
        window.acf.addAction('render_block_preview/type=testimonials', initializeBlock);
    }

})(jQuery);